(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var o=t(2),r=t(19),c=t.n(r),i=t(7),a=t(10),u=t(5),d=t(3),l=t(0),s=function(e){var n=e.handleSearch;return Object(l.jsxs)(l.Fragment,{children:["filter shown with ",Object(l.jsx)("input",{type:"search",onChange:n})]})},h=function(e){var n=e.handleSubmit,t=e.newName,o=e.handleNameChange,r=e.newPhone,c=e.handlePhoneChange;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsx)("h2",{children:"add a new"}),Object(l.jsxs)("div",{children:["name:"," ",Object(l.jsx)("input",{type:"text",name:"name",value:t,onChange:o})]}),Object(l.jsxs)("div",{children:["phone:"," ",Object(l.jsx)("input",{type:"tel",name:"number",value:r,onChange:c,required:!0})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.person,t=e.handleDelete;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("p",{children:[n.name," ",n.number]},n.name+n.id),Object(l.jsx)("span",{children:Object(l.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})})]})},f=function(e){var n=e.filter,t=e.persons,o=e.filterPerson,r=e.handleDelete,c=Object(u.a)(null===t||void 0===t?void 0:t.filter(o)).map((function(e){return Object(l.jsx)(b,{person:e,handleDelete:r},null===e||void 0===e?void 0:e.id)}));return(null===c||void 0===c?void 0:c.length)?c:n?"No Results":"Loading..."},j={error:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},success:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},v=function(e){var n=e.message;if(null===n)return null;var t=n.includes("error")?"error":"success";return console.log(n),Object(l.jsx)("div",{className:"error",style:j[t],children:n})},p=t(6),O=t.n(p),m="/api/persons",g=function(){return O.a.get(m).then((function(e){return e.data}))},x=function(e){return O.a.post(m,e).then((function(e){return e.data}))},w=function(e,n){return O.a.patch("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},y=function(e){return O.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},S=function(){var e=Object(o.useState)([]),n=Object(d.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),b=Object(d.a)(c,2),j=b[0],p=b[1],O=Object(o.useState)(""),m=Object(d.a)(O,2),S=m[0],C=m[1],N=Object(o.useState)(""),k=Object(d.a)(N,2),P=k[0],D=k[1],J=Object(o.useState)(null),L=Object(d.a)(J,2),B=L[0],E=L[1];function R(e){E(e),setTimeout((function(){E(null)}),5e3)}Object(o.useEffect)((function(){g().then((function(e){r(e),R("success: all persons have been loaded")})).catch((function(e){R("error: persons could not be loaded ".concat(e&&JSON.stringify(e)))}))}),[]),Object(o.useEffect)((function(){R("success: testing")}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(v,{message:B}),Object(l.jsx)(s,{handleSearch:function(e){var n;return D(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value.toLowerCase())}}),Object(l.jsx)(h,{handleSubmit:function(e){var n;e.preventDefault(),e.persist();var o=null===t||void 0===t?void 0:t.find((function(e){var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===j||void 0===j?void 0:j.toLowerCase())})),c=Object(u.a)(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.querySelectorAll("input")).reduce((function(e,n){return Object(a.a)(Object(a.a)({},e),{},Object(i.a)({},null===n||void 0===n?void 0:n.name,null===n||void 0===n?void 0:n.value.trim()))}),{});o?window.confirm("".concat(null===o||void 0===o?void 0:o.name," already exists, would you like to update the phone number?"))&&w(null===o||void 0===o?void 0:o.id,c).then((function(e){var n=t.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==(null===o||void 0===o?void 0:o.id)}));r([].concat(Object(u.a)(n),[e])),R("success: updated record for ".concat(o.name))})).catch((function(e){R("error: person ".concat(o.name," could not be updated ").concat(e&&JSON.stringify(e)))})):(x(c).then((function(e){r(t.concat(e)),R("success: ".concat(e.name," created"))})).catch((function(e){R("error: person ".concat(c.name," could not be created ").concat(e&&JSON.stringify(e)))})),p(""),C(""))},newName:j,newPhone:S,handleNameChange:function(e){return p(e.target.value)},handlePhoneChange:function(e){return C(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(f,{persons:t,filterPerson:function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(P)},handleDelete:function(e){var n=t.find((function(n){return(null===n||void 0===n?void 0:n.id)===e}));window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&y(e).then((function(n){r(t.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==e}))),R("success: person with id: ".concat(e," deleted"))})).catch((function(e){R("error: person ".concat(n.name," could not be deleted ").concat(e&&JSON.stringify(e)))}))},filter:P})]})};c.a.render(Object(l.jsx)(S,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a8189a47.chunk.js.map