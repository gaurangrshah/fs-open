{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","handleSearch","type","onChange","PersonForm","handleSubmit","newName","handleNameChange","newPhone","handlePhoneChange","onSubmit","name","value","required","Person","person","handleDelete","number","id","onClick","Persons","filter","persons","filterPerson","filteredPersons","map","length","types","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","success","Notification","message","status","includes","console","log","className","style","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewPhone","setFilter","errorMessage","setErrorMessage","displayNotification","setTimeout","useEffect","personService","catch","JSON","stringify","e","target","toLowerCase","preventDefault","persist","exists","find","inputs","querySelectorAll","reduce","obj","item","trim","window","confirm","newPersons","concat","personToRemove","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1b7af1e2.chunk.js","sourcesContent":["const Filter = ({ handleSearch }) => {\n  return (\n    <>\n      filter shown with <input type='search' onChange={handleSearch} />\n    </>\n  );\n};\n export default Filter\n","const PersonForm = ({\n  handleSubmit,\n  newName,\n  handleNameChange,\n  newPhone,\n  handlePhoneChange,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>add a new</h2>\n      <div>\n        name:{\" \"}\n        <input\n          type='text'\n          name='name'\n          value={newName}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n        phone:{\" \"}\n        <input\n          type='tel'\n          name='number'\n          value={newPhone}\n          onChange={handlePhoneChange}\n          required\n        />\n      </div>\n      <div>\n        <button type='submit'>add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","const Person = ({ person, handleDelete }) => {\n  return (\n    <>\n      <p key={person.name + person.id}>\n        {person.name} {person.number}\n      </p>\n      <span>\n        <button onClick={() => handleDelete(person.id)}>Delete</button>\n      </span>\n    </>\n  );\n};\n\nexport default Person;\n","import Person from \"./Person\";\n\nconst Persons = ({ filter, persons, filterPerson, handleDelete }) => {\n  const filteredPersons = [...persons?.filter(filterPerson)].map((person) => (\n    <Person key={person?.id} person={person} handleDelete={handleDelete} />\n  ));\n  return filteredPersons?.length\n    ? filteredPersons\n    : filter\n    ? \"No Results\"\n    : \"Loading...\";\n};\n\nexport default Persons;\n","const types = {\n  error: {\n    color: \"red\",\n    background: \"lightgrey\",\n    fontSize: \"20px\",\n    borderStyle: \"solid\",\n    borderRadius: \"5px\",\n    padding: \"10px\",\n    marginBottom: \"10px\",\n  },\n  success: {\n    color: \"green\",\n    background: \"lightgrey\",\n    fontSize: \"20px\",\n    borderStyle: \"solid\",\n    borderRadius: \"5px\",\n    padding: \"10px\",\n    marginBottom: \"10px\",\n  },\n};\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  const status = message.includes(\"error\") ? \"error\" : \"success\";\n  console.log(message);\n  return (\n    <div className='error' style={types[status]}>\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const req = axios.delete(`${baseUrl}/${id}`);\n  return req.then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  create,\n  update,\n  remove,\n};\n","import React, { useEffect, useState } from \"react\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const handleNameChange = (e) => setNewName(e.target.value);\n  const handlePhoneChange = (e) => setNewPhone(e.target.value);\n  const handleSearch = (e) => setFilter(e?.target?.value.toLowerCase());\n\n  const checkPerson = (person) => person?.name?.toLowerCase().includes(filter);\n\n  function displayNotification(message) {\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n  }\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((response) => {\n        setPersons(response);\n        displayNotification(`success: all persons have been loaded`);\n      })\n      .catch((error) => {\n        displayNotification(\n          `error: persons could not be loaded ${error && JSON.stringify(error)}`\n        );\n      });\n  }, []);\n\n  useEffect(() => {\n    displayNotification(`success: testing`);\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    e.persist();\n\n    const exists = persons?.find(\n      (person) => person?.name?.toLowerCase() === newName?.toLowerCase()\n    );\n\n    const inputs = [...e?.target?.querySelectorAll(\"input\")].reduce(\n      (obj, item) => ({ ...obj, [item?.name]: item?.value.trim() }), // trim whitespace\n      {}\n    );\n\n    if (exists) {\n      if (\n        window.confirm(\n          `${exists?.name} already exists, would you like to update the phone number?`\n        )\n      ) {\n        personService\n          .update(exists?.id, inputs)\n          .then((response) => {\n            const newPersons = persons.filter((person) => {\n              return person?.id !== exists?.id;\n            });\n            setPersons([...newPersons, response]);\n            displayNotification(`success: updated record for ${exists.name}`);\n          })\n          .catch((error) => {\n            console.error(error);\n            displayNotification(\n              `error: person ${exists.name} could not be updated ${\n                error && JSON.stringify(error)\n              }`\n            );\n          });\n      }\n      return;\n    }\n\n    personService\n      .create(inputs)\n      .then((response) => {\n        setPersons(persons.concat(response));\n        displayNotification(`success: ${response.name} created`);\n      })\n      .catch((error) => {\n        displayNotification(\n          `error: person ${inputs.name} could not be created ${\n            error && JSON.stringify(error)\n          }`\n        );\n      });\n\n    setNewName(\"\");\n    setNewPhone(\"\");\n  };\n\n  const handleDelete = (id) => {\n    const personToRemove = persons.find((p) => p?.id === id);\n    if (\n      window.confirm(`Are you sure you want to delete ${personToRemove.name}?`)\n    ) {\n      personService\n        .remove(id)\n        .then((response) => {\n          setPersons(persons.filter((person) => person?.id !== id));\n          displayNotification(`success: person with id: ${id} deleted`);\n        })\n        .catch((error) => {\n          displayNotification(\n            `error: person ${personToRemove.name} could not be deleted ${\n              error && JSON.stringify(error)\n            }`\n          );\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter handleSearch={handleSearch} />\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        newPhone={newPhone}\n        handleNameChange={handleNameChange}\n        handlePhoneChange={handlePhoneChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        filterPerson={checkPerson}\n        handleDelete={handleDelete}\n        filter={filter}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}